<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta http-equiv="refresh" content="1;url=http://www.rubydoc.info/gems/graphql/1.7.0/GraphQL/Define/InstanceDefinable" />
  </head>
  <body>
    <p>Module: GraphQL::Define::InstanceDefinable
This module provides the <code class="highlighter-rouge">.define { ... }</code> API for
GraphQL::BaseType, GraphQL::Field and others. 
Calling <code class="highlighter-rouge">.accepts_definitions(...)</code> creates:</p>
<ul>
  <li>a keyword to the <code class="highlighter-rouge">.define</code> method - a helper method in the
<code class="highlighter-rouge">.define { ... }</code> block 
The <code class="highlighter-rouge">.define { ... }</code> block will be called lazily. To be sure it has
been called, use the private method <code class="highlighter-rouge">#ensure_defined</code>. That will
call the definition block if it hasn’t been called already. 
The goals are:</li>
  <li>Minimal overhead in consuming classes - Independence between
consuming classes - Extendable by third-party libraries without
monkey-patching or other nastiness 
Examples:
    <h1 id="make-a-class-definable">Make a class definable</h1>
    <p>class Car
include GraphQL::Define::InstanceDefinable
attr_accessor :make, :model, :doors
accepts_definitions(</p>
    <h1 id="these-attrs-will-be-defined-with-plain-setters-attr">These attrs will be defined with plain setters, <code class="highlighter-rouge"><span class="p">{</span><span class="err">attr</span><span class="p">}</span><span class="err">=</span></code></h1>
    <p>:make, :model,</p>
    <h1 id="this-attr-has-a-custom-definition-which-applies-the-config-to-the-target">This attr has a custom definition which applies the config to the target</h1>
    <p>doors: -&gt;(car, doors_count) { doors_count.times { car.doors « Door.new } }
)
ensure_defined(:make, :model, :doors)
def initialize
@doors = []
end
end
class Door; end;</p>
    <h1 id="create-an-instance-with-define">Create an instance with <code class="highlighter-rouge">.define</code>:</h1>
    <p>subaru_baja = Car.define do
make “Subaru”
model “Baja”
doors 4
end</p>
    <h1 id="the-custom-proc-was-applied">The custom proc was applied:</h1>
    <p>subaru_baja.doors #=&gt; [<Door>, <Door>, <Door>, <Door>]</Door></Door></Door></Door></p>
    <h1 id="extending-the-definition-of-a-class">Extending the definition of a class</h1>
    <h1 id="add-some-definitions">Add some definitions:</h1>
    <p>Car.accepts_definitions(all_wheel_drive: GraphQL::Define.assign_metadata_key(:all_wheel_drive))</p>
    <h1 id="use-it-in-a-definition">Use it in a definition</h1>
    <p>subaru_baja = Car.define do</p>
    <h1>…</h1>
    <p>all_wheel_drive true
end</p>
    <h1 id="access-it-from-metadata">Access it from metadata</h1>
    <p>subaru_baja.metadata[:all_wheel_drive] # =&gt; true</p>
    <h1 id="extending-the-definition-of-a-class-via-a-plugin">Extending the definition of a class via a plugin</h1>
    <h1 id="a-plugin-is-any-object-that-responds-to-usedefinition">A plugin is any object that responds to <code class="highlighter-rouge">.use(definition)</code></h1>
    <p>module SubaruCar
extend self
def use(defn)</p>
    <h1 id="defn-has-the-same-methods-as-within-define----block"><code class="highlighter-rouge">defn</code> has the same methods as within <code class="highlighter-rouge">.define { ... }</code> block</h1>
    <p>defn.make “Subaru”
defn.doors 4
end
end</p>
    <h1 id="use-the-plugin-within-a-define----block">Use the plugin within a <code class="highlighter-rouge">.define { ... }</code> block</h1>
    <p>subaru_baja = Car.define do
use SubaruCar
model ‘Baja’
end
subaru_baja.make # =&gt; “Subaru”
subaru_baja.doors # =&gt; [<Door>, <Door>, <Door>, <Door>]</Door></Door></Door></Door></p>
    <h1 id="making-a-copy-with-an-extended-definition">Making a copy with an extended definition</h1>
    <h1 id="create-an-instance-with-define-1">Create an instance with <code class="highlighter-rouge">.define</code>:</h1>
    <p>subaru_baja = Car.define do
make “Subaru”
model “Baja”
doors 4
end</p>
    <h1 id="then-extend-it-with-redefine">Then extend it with <code class="highlighter-rouge">#redefine</code></h1>
    <p>two_door_baja = subaru_baja.redefine do
doors 2
end
Defined Under Namespace:
ClassMethods (modules)
AssignAttribute, AssignMetadataKey, Definition (classes)
Class methods:
included
Instance methods:
define, ensure_defined, initialize_copy, metadata, redefine,
revive_dependent_methods, stash_dependent_methods</p>
  </li>
</ul>


  </body>
</html>
